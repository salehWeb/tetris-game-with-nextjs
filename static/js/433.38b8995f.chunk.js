"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[433],{6433:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(5861),s=n(885),c=n(7757),i=n.n(c),a=n(2791),o=n(292),l=n(921),u=n(2426),x=n.n(u),d=n(3504),p=n(1830),h=n.n(p),m=n(184),f=function(e){var t=e.item,n=e.index,c=e.setPayments,l=(0,a.useState)(!1),u=(0,s.Z)(l,2),p=u[0],f=u[1],y=(0,a.useState)(!1),j=(0,s.Z)(y,2),v=j[0],N=j[1],w=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,h().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.value){e.next=3;break}return e.next=3,(0,o.WQ)(t._id).then(function(){var e=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().fire({title:"Success",text:"Payment canseled",icon:"success",confirmButtonText:"OK"});case 2:c((function(e){return e.filter((function(e){return e._id!==t._id}))})),f(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:f(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,(0,o.R1)(t._id,t.items).then(function(){var e=(0,r.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h().fire({title:"Success",text:"Payment sent",icon:"success",confirmButtonText:"OK",showConfirmButton:!0});case 2:c((function(e){return e.filter((function(e){return e._id!==t._id}))})),N(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)("tr",{className:"".concat(Math.round(n/2)===n/2?"bg-white hover:bg-gray-50":"bg-gray-100 hover:bg-white"," border-b"),children:[(0,m.jsx)("th",{scope:"row",className:"px-5 py-[10px] font-medium text-gray-900 whitespace-nowrap",children:x()(t.sendAt).format("DD/MM/YYYY HH:mm")}),(0,m.jsx)("td",{className:"px-5 py-[10px]",children:t.user.name}),(0,m.jsx)("td",{className:"px-5 py-[10px]",children:t.user.email}),(0,m.jsxs)("td",{className:"px-5 py-[10px]",children:["$",t.total.toFixed(2)]}),(0,m.jsx)("td",{className:"px-5 py-[10px]",children:(0,m.jsx)(d.rU,{to:"/admin/payments/item?id=".concat(t._id),children:(0,m.jsx)("span",{className:"hover:underline hover:text-blue-600 cursor-pointer",children:"items"})})}),v?(0,m.jsx)("td",{className:"px-5 py-[10px] text-right flex justify-center items-center",children:(0,m.jsx)("div",{className:"font-medium text-gray-600 hover:underline",children:"Send"})}):(0,m.jsx)("td",{className:"px-5 py-[10px] text-right",children:(0,m.jsx)("div",{onClick:g,className:"font-medium cursor-pointer text-blue-600 hover:underline",children:"Send"})}),p?(0,m.jsx)("td",{className:"px-5 py-[10px] text-right flex justify-center items-center",children:(0,m.jsx)("div",{className:"font-medium text-gray-600 hover:underline",children:"Cancel"})}):(0,m.jsx)("td",{onClick:w,className:"px-5 py-[10px] text-right",children:(0,m.jsx)("div",{className:"font-medium cursor-pointer text-blue-600 hover:underline",children:"Cancel"})})]},t._id+n)},y=function(){var e=(0,a.useState)([]),t=(0,s.Z)(e,2),n=t[0],c=t[1],u=(0,a.useState)(!1),x=(0,s.Z)(u,2),d=x[0],p=x[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.uA)().then((function(e){c(e.data),p(!0)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,m.jsxs)("div",{className:"min-h-[60vh]  flex justify-center items-center my-10",children:[d&&n.length>0&&(0,m.jsx)("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg ",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-gray-500",children:[(0,m.jsx)("thead",{className:"text-xs text-gray-100 uppercase bg-gray-700",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{scope:"col",className:"px-5 py-[10px]",children:"sendAt"}),(0,m.jsx)("th",{scope:"col",className:"px-5 py-[10px]",children:"user name"}),(0,m.jsx)("th",{scope:"col",className:"px-5 py-[10px]",children:"User email"}),(0,m.jsx)("th",{scope:"col",className:"px-5 py-[10px]",children:"total"}),(0,m.jsx)("th",{scope:"col",className:"px-5 py-[10px]",children:"items"}),(0,m.jsx)("th",{scope:"col",className:"px-5 py-[10px]",children:(0,m.jsx)("span",{className:"sr-only",children:"Send"})}),(0,m.jsx)("th",{scope:"col",className:"px-5 py-[10px]",children:(0,m.jsx)("span",{className:"sr-only",children:"Cancel"})})]})}),(0,m.jsx)("tbody",{children:n&&n.map((function(e,t){return(0,m.jsx)(f,{setPayments:c,item:e,index:t},e._id)}))})]})}),!d&&(0,m.jsx)("div",{className:"text-center flex justify-center items-center",children:(0,m.jsx)(l.aN,{})}),d&&0===n.length&&(0,m.jsx)("div",{className:"text-center flex justify-center items-center w-full",children:(0,m.jsx)("h1",{className:"text-2xl",children:"No Orders Found"})})]})}}}]);
//# sourceMappingURL=433.38b8995f.chunk.js.map