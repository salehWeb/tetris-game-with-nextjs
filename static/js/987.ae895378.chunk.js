"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[987],{3987:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(2982),s=n(5861),l=n(885),a=n(7757),i=n.n(a),c=n(2791),o=n(292),u=n(1110),d=n(921),m=n(3853),f=n(2426),x=n.n(f),h=n(6856),p=n(184),g=function(e){var t=e.item,n=e.setData,r=e.user,a=e.setIsUpdata,u=e.commentsData,d=e.setComment,f=e.setCommentsData,g=e.id,b=(e.getItem,(0,c.useState)(!1)),w=(0,l.Z)(b,2),v=w[0],j=w[1],y=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!v),n(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)(i().mark((function e(){var n,s,l,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handelDelete"),j(!1),n=r.email,s=r.name,l=t._id,a=u.filter((function(e){return e._id!==l})),f(a),e.next=8,(0,o.YF)(g,{id:l,user:{email:n,name:s}});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("section",{className:"justify-center w-full flex flex-col items-center rounded-lg drop-shadow-lg bg-white px-4 p-2",children:[(0,p.jsxs)("div",{className:"flex cursor-pointer relative w-full items-center",children:[t.email===(null===r||void 0===r?void 0:r.email)&&(0,p.jsx)(m.$Pu,{onClick:y}),(0,p.jsx)("p",{className:"flex text-blue-600  items-center justify-center ml-2",children:t.name}),v&&(0,p.jsxs)("ul",{className:"absolute flex justify-center items-center min-w-[120px] -bottom-[100px]  bg-gray-100 flex-col p-2 z-[5] drop-shadow-lg  rounded-lg",children:[(0,p.jsxs)("li",{onClick:N,className:"flex flex-row justify-between w-full p-2 hover:bg-slate-200 rounded-lg items-center",children:[(0,p.jsx)("p",{children:"delete"})," ",(0,p.jsx)(m.hT1,{})]}),(0,p.jsxs)("li",{onClick:function(){a(!0),j(!1),d(t.comment)},className:"flex flex-row justify-between w-full p-2 hover:bg-slate-200 rounded-lg items-center",children:[(0,p.jsx)("p",{children:"up data"})," ",(0,p.jsx)(h.Gpi,{})]})]})]}),(0,p.jsx)("hr",{className:"flex w-full my-[3.5px]"}),(0,p.jsxs)("main",{className:"flex w-full rounded-lg flex-row justify-between items-center",children:[(0,p.jsx)("div",{className:"flex h-9 w-9 rounded-lg justify-center items-center",children:(0,p.jsx)("img",{src:"https://avatars.dicebear.com/api/bottts/".concat(t.name,".svg"),alt:t.name,className:"object-contain rounded-lg drop-shadow-2xl flex w-full h-full"})}),(0,p.jsx)("em",{className:"flex place-self-center items-center ml-2 text-sm w-full",children:x()(t.creatAt).fromNow()})]}),(0,p.jsx)("p",{className:"text-lg p-1 flex place-self-center items-center ml-2 w-full",children:t.comment})]},t._id)})},b=n(2059),w=n(9434),v=n(7587),j=n(1830),y=n.n(j),N=n(6871),k=function(){var e,t,n=(0,N.s0)(),a=(0,c.useState)(),m=(0,l.Z)(a,2),f=m[0],x=m[1],j=(0,c.useState)(""),k=(0,l.Z)(j,2),C=k[0],Z=k[1],S=(0,c.useState)(!1),E=(0,l.Z)(S,2),_=E[0],B=E[1],I=(0,c.useState)(!1),D=(0,l.Z)(I,2),T=D[0],F=D[1],L=(0,c.useState)(),O=(0,l.Z)(L,2),z=O[0],K=O[1],U=(0,c.useState)((null===f||void 0===f||null===(e=f.likes)||void 0===e?void 0:e.length)||0),$=(0,l.Z)(U,2),J=$[0],P=$[1],Y=(0,c.useState)(!1),A=(0,l.Z)(Y,2),R=A[0],G=A[1],M=(0,c.useState)(!1),Q=(0,l.Z)(M,2),q=Q[0],H=Q[1],V=(0,c.useState)([]),W=(0,l.Z)(V,2),X=W[0],ee=W[1],te=localStorage.getItem("profile"),ne=te&&(null===(t=JSON.parse(te))||void 0===t?void 0:t.user),re=(0,w.I0)();(0,c.useEffect)((function(){ee((null===f||void 0===f?void 0:f.comments)||[])}),[f]),(0,c.useEffect)((function(){re({type:v.gZ})}),[re]);var se=(0,w.v9)((function(e){return e.card})).cards,le=(0,c.useState)(se),ae=(0,l.Z)(le,2),ie=ae[0],ce=ae[1];(0,c.useEffect)((function(){var e;P(null===f||void 0===f||null===(e=f.likes)||void 0===e?void 0:e.length)}),[f]);var oe=function(){var e=(0,s.Z)(i().mark((function e(t){var n,s,l,a,c,o,u,d,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,s=t.title,l=t.type,a=t.likes,c=t.price,o=t.discount,u=t.desc,d=t.pieces,m={_id:n,title:s,type:l,likes:a,price:c,discount:o,desc:u,pieces:d},(null===se||void 0===se?void 0:se.length)<=0?ce([m]):ce([].concat((0,r.Z)(se),[m])),e.next=5,localStorage.setItem("cardItems",JSON.stringify(ie));case 5:re({type:v.gZ});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){localStorage.setItem("cardItems",JSON.stringify(ie))}),[ie]);var ue=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fe){e.next=4;break}x(fe),e.next=6;break;case 4:return e.next=6,(0,o.e)(window.location.search.split("=")[1]).then(function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t.data.data[0]);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){Z(""),F(!1)},me=function(){var e=(0,s.Z)(i().mark((function e(t){var r,l,a,c,u,d,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!te){e.next=19;break}if(G(!0),T){e.next=11;break}if(""===C){e.next=9;break}return r=ne.email,l=ne.name,a={comment:C,user:{email:r,name:l}},e.next=9,(0,o.hZ)(f._id,a).then(function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),Z(""),ee(t.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 9:e.next=16;break;case 11:return c=ne.email,u=ne.name,d=z._id,m={comment:C,id:d,user:{email:c,name:u}},e.next=16,(0,o.s0)(f._id,m).then((function(e){de(),console.log(e),ee(e.data)})).catch((function(e){return console.log(e)}));case 16:G(!1),e.next=20;break;case 19:y().fire({title:"You must be logged in to comment",icon:"warning",confirmButtonText:"Login",showCancelButton:!0,cancelButtonText:"Cancel",reverseButtons:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showLoaderOnConfirm:!0,preConfirm:function(){n("/login")}});case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=(0,w.v9)((function(e){return e.card})).itemPage,xe="".concat(null===ne||void 0===ne?void 0:ne.email);(0,c.useEffect)((function(){if(f){H(!0);var e=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Ij)(f._id).then((function(e){P(e.data.likes.length),e.data.likes.map((function(e){e.email===xe?B(!0):B(!1)}))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),H(!1)}}),[f]),(0,c.useEffect)((function(){ue()}),[]);var he=function(){var e=(0,s.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!te){e.next=10;break}return H(!0),B(!_),P(_?J-1:J+1),t=ne.email,r=ne.name,e.next=7,(0,o.yP)(f._id,{email:t,name:r}).then((function(e){H(!1)})).catch((function(e){return console.log(e)}));case 7:H(!1),e.next=11;break;case 10:y().fire({title:"You must be logged in to like this item",icon:"warning",confirmButtonText:"Login",showCancelButton:!0,cancelButtonText:"Cancel",cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",reverseButtons:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,focusConfirm:!1,focusCancel:!1,preConfirm:function(){n("/login")}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsx)("div",{className:"items-center grid grid-cols-1 justify-center w-full min-h-[60vh] sm:px-16 rounded-lg bg-Blur px-8 py-4",children:f?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(u.E.div,{initial:{x:400,opacity:0,scale:.2},animate:{x:0,opacity:1,scale:1},exit:{opacity:.8,x:700,scale:1},className:"w-full my-6 grid xl:grid-cols-2 lg:grid-cols-2 md:grid-cols-2 grid-cols-1 gap-10  ease-in-out duration-100 transition-all min-h-[50vh] rounded-lg",children:[(0,p.jsx)("div",{className:"flex  w-full flex-row flex-wrap justify-between rounded-lg h-full drop-shadow-lg",children:(0,p.jsxs)("div",{className:"w-full flex relative lg:h-[50vh] md:h-[50vh]  sm:h-[50vh] h-[30vh] rounded-lg  bg-white p-4 ",children:[(0,p.jsx)("img",{className:" w-full  h-full object-contain",src:f.img,alt:f.title}),0!==f.discount&&(0,p.jsx)("div",{className:"shadow-lg max-w-fit rounded-full  -top-7 left-[5%] drop-shadow-lg absolute h-10 items-center justify-center  z-[4] flex ",children:(0,p.jsxs)("p",{className:"text-gray-100 md:text-lg p-1 rounded-full bg-red-600  flex justify-between text-semibold text-base",children:[String(f.discount).split(".")[1],"0%"]})}),(0,p.jsx)("div",{className:"bg-gray-800 shadow-lg  max-w-fit rounded-lg  -top-7 right-[5%] px-[6px] absolute h-10 items-center justify-center  z-[4] flex ",children:0!==f.discount?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"flex justify-between items-center gap-8 flex-col",children:(0,p.jsxs)("p",{className:"text-lg text-gray-100 font-semibold flex-row flex",children:[(0,p.jsx)("span",{className:"text-sm text-blue-600",children:"$"}),(0,p.jsx)("span",{className:"line-through mr-3",children:f.price}),(0,p.jsx)("span",{className:"text-sm text-blue-600",children:"$"}),Number(f.price-f.price*f.discount).toFixed(2)]})})}):(0,p.jsx)("div",{className:"flex justify-between items-center gap-8",children:(0,p.jsxs)("p",{className:"text-lg text-gray-100 font-semibold flex-row flex",children:[(0,p.jsx)("span",{className:"text-sm text-blue-600",children:"$"}),f.price]})})})]})}),(0,p.jsxs)("div",{className:" w-full h-full flex flex-col rounded-lg drop-shadow-lg bg-white p-4",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between  mr-3 w-full",children:[q?(0,p.jsx)("div",{className:"flex items-center -mr-3 justify-center w-10 h-10 ",children:(0,p.jsx)(b.Z,{Notext:!0})}):(0,p.jsxs)(u.E.button,{whileTap:{scale:.6},onClick:he,className:"flex-none flex flex-col items-center ease-in-out duration-[50] transition-all justify-center w-10 h-10 rounded-md ".concat(_?"text-red-600 shadow-md shadow-red-500 border-red-300":"text-slate-300 border-slate-200"," border "),type:"button","aria-label":"Like",children:[(0,p.jsx)("svg",{width:"20",height:"20",fill:"currentColor","aria-hidden":"true",children:(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"})}),(0,p.jsx)("span",{className:"flex text-xs text-gray-400",children:J})]}),ie&&ie.find((function(e){return e._id===f._id}))?(0,p.jsx)(u.E.div,{whileTap:{scale:.6},className:"w-8 h-8 rounded-full  bg-gradient-to-tr from-blue-300 to-blue-600   flex items-center justify-center cursor-pointer hover:shadow-md ",children:(0,p.jsx)(h.oDQ,{className:"text-white"})}):(0,p.jsx)(u.E.div,{whileTap:{scale:.6},className:"w-8 h-8  duration-75 rounded-full bg-gradient-to-tr  from-red-300 to-red-600 flex items-center justify-center cursor-pointer hover:shadow-md ",children:(0,p.jsx)(h.kcE,{onClick:function(){return oe(f)},className:"text-white"})})]}),(0,p.jsx)("div",{className:"flex items-center justify-center",children:(0,p.jsxs)("h1",{className:"text-2xl flex flex-col justify-center items-center text-blue-600 mb-10",children:[f.title,(0,p.jsx)("span",{className:"min-h-[1px] min-w-full  bg-gradient-to-tr from-blue-300 to-blue-600  flex "})]})}),(0,p.jsxs)("p",{className:"text-gray-500 flex ",children:[f.desc," wegewge ebeberberbe ebrebebreb erbreberbreb egrebreberb brebre"]}),(0,p.jsx)("hr",{className:"min-h-[1px] min-w-full  bg-gradient-to-tr mt-4 from-blue-300 to-blue-600  flex"}),(0,p.jsxs)("div",{className:"flex justify-between items-center flex-row flex-wrap mt-auto",children:[(0,p.jsxs)("p",{className:"text-gray-700 ",children:["items left ",(0,p.jsx)("span",{className:"text-blue-600 font-semibold text-lg",children:f.pieces})]}),(0,p.jsxs)("p",{className:"text-gray-700 ",children:["item type ",(0,p.jsx)("span",{className:"text-blue-600 font-semibold text-lg",children:f.type})]})]})]})]},f._id),(0,p.jsxs)(u.E.div,{initial:{x:400,opacity:0,scale:.2},animate:{x:0,opacity:1,scale:1},exit:{opacity:.8,x:700,scale:1},className:"w-full my-6 grid lg:grid-cols-2 md:grid-cols-2  gap-6  ease-in-out duration-100 transition-all min-h-[50vh] rounded-lg",children:[(0,p.jsx)("div",{className:"w-full flex h-[50vh] max-h-fit justify-center items-center rounded-lg drop-shadow-lg bg-white",children:(0,p.jsxs)("form",{onSubmit:function(e){return me(e)},className:"w-full p-4",children:[(0,p.jsxs)("div",{className:"mb-2",children:[(0,p.jsx)("label",{htmlFor:"comment",className:"text-lg text-gray-600",children:T?"Updata a comment":"Add a comment"}),(0,p.jsx)("textarea",{className:"w-full max-h-[35vh] h-[35vh] min-h-[1vh] p-2 border rounded focus:outline-none focus:ring-gray-300 focus:ring-1",placeholder:"Comment",value:C,onChange:function(e){return Z(e.target.value)}})]}),(0,p.jsxs)("div",{className:"flex justify-around item-center",children:[R?(0,p.jsx)("button",{className:"px-3 py-2 text-sm text-blue-100 bg-blue-600 rounded drop-shadow-md\r hover:bg-white hover:drop-shadow-2xl hover:text-blue-600 hover:rounded-3xl hover:border hover:border-blue-600 transition-all duration-[130ms] ease-in-out",type:"submit",disabled:!0,children:(0,p.jsx)(b.Z,{})}):(0,p.jsx)("button",{type:"submit",className:"px-3 py-2 text-sm text-blue-100 bg-blue-600 rounded drop-shadow-md\r hover:bg-white hover:drop-shadow-2xl hover:text-blue-600 hover:rounded-3xl hover:border hover:border-blue-600 transition-all duration-[130ms] ease-in-out",children:T?"Updata":"Comment"}),(0,p.jsx)("button",{onClick:de,className:"px-3 py-2 text-sm text-blue-600 border border-blue-500 drop-shadow-md \r hover:bg-blue-600 hover:drop-shadow-2xl hover:text-white hover:rounded-3xl transition-all duration-[130ms] ease-in-out",children:"Cancel"})]})]})}),(0,p.jsx)("div",{className:"flex justify-center  items-center gap-6 flex-col h-fit w-full rounded-lg",children:X&&X.map((function(e,t){return(0,p.jsx)(g,{getItem:ue,commentsData:X,setCommentsData:ee,item:e,user:ne,setData:K,id:f._id,setIsUpdata:F,setComment:Z},e._id+t)}))})]})]}):(0,p.jsx)("div",{className:"flex w-full h-full justify-center items-center",children:(0,p.jsx)(d.aN,{})})})}}}]);
//# sourceMappingURL=987.ae895378.chunk.js.map